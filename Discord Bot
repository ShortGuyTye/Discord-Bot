import discord
import os
import Phonetics
from dotenv import load_dotenv
from discord.ext import commands

load_dotenv() # load all the variables from the env file
phonetics = Phonetics.wordDict(phonetics = {})
soundList = Phonetics.soundDict(soundList = {})
is_on = False

intents = discord.Intents.default()
intents.message_content = True
bot = discord.Bot(intents=intents)

@bot.slash_command(name="activate", description="activate")
async def activate(ctx):
    global is_on 
    is_on = True
    await ctx.respond("Bwahaha you fool")

@bot.slash_command(name="deactivate", description="deactivate")
async def deactivate(ctx):
    global is_on 
    is_on = False
    await ctx.respond("WHAT? NO! HOW DID YOU FIND MY ONLY WEAKNESS??")

@bot.event
async def on_message(message: discord.Message):
    if message.author == bot.user:
        return
    elif (is_on):
        await message.reply(content=Phonetics.phonetic(message.content, phonetics, soundList))

@bot.event
async def on_ready():
    print(f"{bot.user} is ready and online!")

bot.run(os.getenv('TOKEN'))
    